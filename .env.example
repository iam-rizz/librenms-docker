# LibreNMS Configuration
TZ=Asia/Jakarta
PUID=1000
PGID=1000

# Database Configuration
DB_HOST=db
DB_NAME=librenms
DB_USER=librenms
DB_PASSWORD=librenms_password
DB_TIMEOUT=60
MYSQL_ROOT_PASSWORD=root_password

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# Dispatcher Configuration
DISPATCHER_NODE_ID=dispatcher1
SIDECAR_DISPATCHER=1

# Security Configuration
# APP_KEY will be generated automatically by configure-encryption.sh
# Do not set this manually unless you know what you're doing
APP_KEY=

# =============================================================================
# RESOURCE LIMITS - Pilih preset sesuai RAM sistem Anda
# =============================================================================
# Uncomment salah satu preset di bawah, atau custom manual
# JANGAN aktifkan lebih dari 1 preset!

# -----------------------------------------------------------------------------
# PRESET 1: RAM 2GB (Minimal) - Default
# -----------------------------------------------------------------------------
LIBRENMS_MEMORY=1280M
LIBRENMS_CPU=1.25
DB_MEMORY=512M
DB_CPU=0.5
REDIS_MEMORY=128M
REDIS_CPU=0.125
DISPATCHER_MEMORY=128M
DISPATCHER_CPU=0.125

# -----------------------------------------------------------------------------
# PRESET 2: RAM 4GB (Recommended)
# -----------------------------------------------------------------------------
# LIBRENMS_MEMORY=2560M
# LIBRENMS_CPU=2.0
# DB_MEMORY=1024M
# DB_CPU=1.0
# REDIS_MEMORY=256M
# REDIS_CPU=0.25
# DISPATCHER_MEMORY=256M
# DISPATCHER_CPU=0.25

# -----------------------------------------------------------------------------
# PRESET 3: RAM 8GB (High Performance)
# -----------------------------------------------------------------------------
# LIBRENMS_MEMORY=5120M
# LIBRENMS_CPU=3.0
# DB_MEMORY=2048M
# DB_CPU=1.5
# REDIS_MEMORY=512M
# REDIS_CPU=0.5
# DISPATCHER_MEMORY=512M
# DISPATCHER_CPU=0.5

# -----------------------------------------------------------------------------
# PRESET 4: RAM 16GB (Maximum Performance)
# -----------------------------------------------------------------------------
# LIBRENMS_MEMORY=10240M
# LIBRENMS_CPU=4.0
# DB_MEMORY=4096M
# DB_CPU=2.0
# REDIS_MEMORY=1024M
# REDIS_CPU=1.0
# DISPATCHER_MEMORY=1024M
# DISPATCHER_CPU=1.0

# =============================================================================
# DATABASE OPTIMIZATION PARAMETERS
# =============================================================================
# Pilih preset sesuai DB_MEMORY di atas
# JANGAN aktifkan lebih dari 1 preset!

# -----------------------------------------------------------------------------
# DB PRESET 1: 512MB (untuk RAM 2GB)
# -----------------------------------------------------------------------------
DB_INNODB_BUFFER_POOL=256M
DB_INNODB_LOG_FILE_SIZE=64M
DB_MAX_CONNECTIONS=50
DB_MAX_USER_CONNECTIONS=45
DB_THREAD_CACHE_SIZE=8
DB_TABLE_OPEN_CACHE=400
DB_TABLE_DEFINITION_CACHE=400
DB_TMP_TABLE_SIZE=32M
DB_MAX_HEAP_TABLE_SIZE=32M
DB_SORT_BUFFER_SIZE=2M
DB_READ_BUFFER_SIZE=1M
DB_READ_RND_BUFFER_SIZE=2M
DB_JOIN_BUFFER_SIZE=2M
DB_INNODB_LOG_BUFFER_SIZE=8M
DB_INNODB_READ_IO_THREADS=2
DB_INNODB_WRITE_IO_THREADS=2

# -----------------------------------------------------------------------------
# DB PRESET 2: 1GB (untuk RAM 4GB)
# -----------------------------------------------------------------------------
# DB_INNODB_BUFFER_POOL=512M
# DB_INNODB_LOG_FILE_SIZE=128M
# DB_MAX_CONNECTIONS=100
# DB_MAX_USER_CONNECTIONS=90
# DB_THREAD_CACHE_SIZE=16
# DB_TABLE_OPEN_CACHE=800
# DB_TABLE_DEFINITION_CACHE=800
# DB_TMP_TABLE_SIZE=64M
# DB_MAX_HEAP_TABLE_SIZE=64M
# DB_SORT_BUFFER_SIZE=4M
# DB_READ_BUFFER_SIZE=2M
# DB_READ_RND_BUFFER_SIZE=4M
# DB_JOIN_BUFFER_SIZE=4M
# DB_INNODB_LOG_BUFFER_SIZE=16M
# DB_INNODB_READ_IO_THREADS=4
# DB_INNODB_WRITE_IO_THREADS=4

# -----------------------------------------------------------------------------
# DB PRESET 3: 2GB (untuk RAM 8GB)
# -----------------------------------------------------------------------------
# DB_INNODB_BUFFER_POOL=1024M
# DB_INNODB_LOG_FILE_SIZE=256M
# DB_MAX_CONNECTIONS=200
# DB_MAX_USER_CONNECTIONS=180
# DB_THREAD_CACHE_SIZE=32
# DB_TABLE_OPEN_CACHE=1600
# DB_TABLE_DEFINITION_CACHE=1600
# DB_TMP_TABLE_SIZE=128M
# DB_MAX_HEAP_TABLE_SIZE=128M
# DB_SORT_BUFFER_SIZE=8M
# DB_READ_BUFFER_SIZE=4M
# DB_READ_RND_BUFFER_SIZE=8M
# DB_JOIN_BUFFER_SIZE=8M
# DB_INNODB_LOG_BUFFER_SIZE=32M
# DB_INNODB_READ_IO_THREADS=8
# DB_INNODB_WRITE_IO_THREADS=8

# -----------------------------------------------------------------------------
# DB PRESET 4: 4GB (untuk RAM 16GB)
# -----------------------------------------------------------------------------
# DB_INNODB_BUFFER_POOL=2048M
# DB_INNODB_LOG_FILE_SIZE=512M
# DB_MAX_CONNECTIONS=400
# DB_MAX_USER_CONNECTIONS=360
# DB_THREAD_CACHE_SIZE=64
# DB_TABLE_OPEN_CACHE=3200
# DB_TABLE_DEFINITION_CACHE=3200
# DB_TMP_TABLE_SIZE=256M
# DB_MAX_HEAP_TABLE_SIZE=256M
# DB_SORT_BUFFER_SIZE=16M
# DB_READ_BUFFER_SIZE=8M
# DB_READ_RND_BUFFER_SIZE=16M
# DB_JOIN_BUFFER_SIZE=16M
# DB_INNODB_LOG_BUFFER_SIZE=64M
# DB_INNODB_READ_IO_THREADS=16
# DB_INNODB_WRITE_IO_THREADS=16

# =============================================================================
# DATABASE STATIC PARAMETERS (jangan diubah kecuali tahu yang Anda lakukan)
# =============================================================================
DB_INNODB_FILE_PER_TABLE=1
DB_LOWER_CASE_TABLE_NAMES=0
DB_CHARACTER_SET=utf8mb4
DB_COLLATION=utf8mb4_unicode_ci
DB_SKIP_LOG_BIN=1
DB_PERFORMANCE_SCHEMA=OFF
DB_INNODB_FLUSH_LOG_AT_TRX_COMMIT=2
DB_INNODB_FLUSH_METHOD=O_DIRECT
DB_WAIT_TIMEOUT=600
DB_INTERACTIVE_TIMEOUT=600
DB_CONNECT_TIMEOUT=10
DB_MAX_ALLOWED_PACKET=64M
